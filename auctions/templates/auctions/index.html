{% extends "auctions/layout.html" %}
{% load static %}

{% block body %}
<div class="container-fluid content-below-navbar" style="margin-top: 72px;">
    <div class="row">
      <div class="col-md-7 ">
        <div class="content-bn">
          {% if user.is_authenticated %}
            Welcome <strong class="name-content-bn">{{ user.username }}</strong>!
          {% else %}
            Welcome!
          {% endif %}
        </div>
        <div>eBay-like e-commerce auction site that will allow you to post auction listings, place bids on listings, comment on those listings, and add listings to a “watchlist.”</div>
      </div>
      <div class="col-md-5 img">              
          <div class="imgborder"></div>          
      </div>
    </div>
  </div>

  <div class="dropdown">
    <button class="btn btn-light  dropdown-toggle hello" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
      Dropdown button
    </button>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
      {% for category in categories %}
        <li><a class="dropdown-item" href="#">{{category}}</a></li>
      {% endfor %}
    </ul>
  </div>

 <div class="container-fluid">
   <div class="row">
    {% for auction in auctions %}
     <div class="card col-lg-4 col-md-6" style="text-align: center;">
      
        <div class="card-body">
          <h5 class="card-title item-title" style="margin-bottom: 1.25rem;"><strong>{{auction.title}}</strong></h5>
          <h6 class="card-title"style="margin-bottom: 1rem;">Category: {{auction.category}}</h6>
          {% if auction.image %}
          <img class="img-fluid" src="{{auction.image.url}}" alt="item image" style="max-height: 300px;">
        {% else %}
          <img class="img-fluid" src="{% static 'auctions/no_image.svg' %}" alt="item image" style="height: 300px; width: 60%;">
        {% endif %}
        </div>
      <ul class="list-group list-group-flush">
        {% if auction.latest_bid %}
          {% if auction.close == True %}
            <li class="list-group-item currentbid">Sold for: ${{auction.latest_bid|floatformat:2}}</li>
          {% else %}
            <li class="list-group-item currentbid">Current Bid: ${{auction.latest_bid|floatformat:2}}</li>
          {% endif %}
        {% else %}
          <li class="list-group-item currentbid">Opening Bid: ${{auction.starting_bid|floatformat:2}}</li>
        {% endif %}
      </ul>
      <div class="card-body">
        <a href="#" class="card-link btn btn-listing">Listing</a>
        <div class="card-footer text-muted">{{auction.dateOfListing}}</div>
      </div>
     </div>
     {% endfor %}
   </div>
 </div>

  <h1 class="hello">Auctions</h1>
  <div>
      {% if user.is_authenticated %}
          Signed in as <strong>{{ user.username }}</strong>.
      {% else %}
          Not signed in.
      {% endif %}
  </div>
  <ul class="nav">
      <li class="nav-item">
          <a class="nav-link" href="{% url 'index' %}">Active Listings</a>
      </li>
      {% if user.is_authenticated %}
          <li class="nav-item">
              <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
          </li>
      {% else %}
          <li class="nav-item">
              <a class="nav-link" href="{% url 'login' %}">Log In</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="{% url 'register' %}">Register</a>
          </li>
      {% endif %}
  </ul>
  <hr>
{% endblock %}